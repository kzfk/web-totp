(this["webpackJsonpweb-totp"]=this["webpackJsonpweb-totp"]||[]).push([[0],{108:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(12),o=n.n(r),i=(n(96),n(154)),s=n(142),l=n(14),d=n(76),j=n(144),u=n(146),b=n(155),h=n(147),p=n(2),O=Object(s.a)((function(e){return{appbar:{backgroundColor:"transparent",color:e.palette.background.contrastText,boxShadow:"none"},toolbar:{justifyContent:"center",fontSize:"20px !important",flexDirection:"column"},logo:{fontWeight:"bolder",padding:e.spacing(4),paddingBottom:e.spacing(1)},logoSecondary:{color:e.palette.primary.dark},text:{textAlign:"center"}}}));function x(){var e=O();return Object(p.jsx)(j.a,{position:"static",className:e.appbar,children:Object(p.jsxs)(u.a,{className:e.toolbar,children:[Object(p.jsx)(b.a,{children:Object(p.jsxs)(h.a,{variant:"h4",className:e.logo,children:["Web -"," ",Object(p.jsx)("span",{className:e.logoSecondary,children:"TOTP"})]})}),Object(p.jsx)(b.a,{children:Object(p.jsx)(h.a,{variant:"h6",className:e.text,children:"An open source TOTP generator"})})]})})}function f(e){var t=e.children;return Object(p.jsxs)("div",{children:[Object(p.jsx)(x,{}),t]})}var g=n(21),m=n(10),v=n(149),C=n(152),w=n(79),k=n(153),y=n(78),S=n(162),B=n(58),T=n.n(B),N=n(73),I=n.n(N),E=n(8),A=n(161),R=n(72),F=n.n(R),P=n(16),W=Object(s.a)((function(e){return{search:Object(E.a)({position:"absolute",borderRadius:e.shape.borderRadius,backgroundColor:Object(P.a)(e.palette.secondary.main,.15),"&:hover":{backgroundColor:Object(P.a)(e.palette.secondary.main,.25)},marginRight:e.spacing(2),marginLeft:0,width:"50%"},e.breakpoints.up("sm"),{width:"24ch"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputInput:Object(E.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"50%"},e.breakpoints.up("sm"),{width:"20ch"})}}));function L(e){var t=e.placeholder,n=e.onChange,a=W();return Object(p.jsxs)("div",{className:a.search,children:[Object(p.jsx)("div",{className:a.searchIcon,children:Object(p.jsx)(F.a,{})}),Object(p.jsx)(A.a,{placeholder:t,classes:{input:a.inputInput},inputProps:{"aria-label":"search"},onChange:n})]})}var D=n(150),_=n(151),G=n(148);function M(e){var t=e.min,n=e.max,a=e.value;return Object(p.jsxs)(b.a,{position:"relative",display:"inline-flex",children:[Object(p.jsx)(G.a,{variant:"determinate",value:100*(a-t)/(n-t)}),Object(p.jsx)(b.a,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",children:Object(p.jsx)(h.a,{variant:"caption",component:"div",color:"textSecondary",children:a})})]})}function U(){var e,t=Object(a.useState)((function(){return generator})),n=Object(m.a)(t,2),c=n[0],r=n[1],o=Object(a.useState)(!1),i=Object(m.a)(o,2),s=i[0],l=i[1];return c||("function"===typeof generator?r((function(){return generator})):(e=50,new Promise((function(t){return setTimeout(t,e)}))).then((function(){return l(!s)}))),generator}var V=Object(s.a)((function(e){return{name:{color:e.palette.secondary.dark},icon:{backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.main}},mainGrid:{padding:e.spacing(1)}}})),H=function(){return Math.floor(Date.now()/1e3)},J=function(){return Math.floor(H()/30)};function K(e){var t=e.id,n=e.name,c=e.secret,r=e.snackbarOpen,o=V(),i=Object(a.useState)(0),s=Object(m.a)(i,2),l=s[0],d=s[1],j=Object(a.useState)(0),u=Object(m.a)(j,2),O=u[0],x=u[1],f=Object(a.useState)(0),g=Object(m.a)(f,2),w=g[0],k=g[1],y=Object(a.useState)(H()),S=Object(m.a)(y,2),B=S[0],T=S[1],N=U();setInterval((function(){return T(H())}),1e3);var I=Math.max(0,w-B);return Object(a.useEffect)((function(){"function"===typeof N&&(d(N(c,32)),k(30*J()+30),x(J()))}),[N,c,O]),Object(a.useEffect)((function(){B>=w&&x(J())}),[B]),Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(v.a,{container:!0,className:o.mainGrid,spacing:0,id:t,alignItems:"center",onClick:function(){navigator.clipboard.writeText(l.toString()).then((function(){return r("Copied!")}))},children:[Object(p.jsx)(v.a,{item:!0,xs:2,children:Object(p.jsx)(b.a,{display:"flex",justifyContent:"center",children:Object(p.jsx)(D.a,{className:o.icon,children:Object(p.jsx)(_.a,{})})})}),Object(p.jsx)(v.a,{item:!0,xs:8,children:Object(p.jsxs)(C.a,{children:[Object(p.jsx)(h.a,{variant:"h5",children:l||"------"}),Object(p.jsx)(h.a,{variant:"subtitle1",className:o.name,children:n})]})}),Object(p.jsx)(v.a,{item:!0,xs:2,children:Object(p.jsx)(b.a,{display:"flex",justifyContent:"center",mr:2,children:Object(p.jsx)(M,{max:30,min:0,value:I})})})]})})}var Y=Object(s.a)((function(e){return{cellBox:{borderRadius:"4px",border:"1px solid #CCCCCC",height:"28rem",overflowY:"scroll"},cell:{cursor:"pointer","&:hover":{backgroundColor:e.palette.background.main},"&:active":{backgroundColor:e.palette.background.dark}},borderCell:{borderBottom:"1px dashed #CCCCCC"},iconButton:{marginBottom:e.spacing(2)},borderButton:{border:"1px solid #CCCCCC"},noItems:{color:e.palette.secondary.main,textAlign:"center"}}}));function Q(e){var t=e.data,n=e.handleViewChange,r=e.clearAllCodes,o=e.snackBarOpen,i=Y(),s=Object(a.useState)(""),l=Object(m.a)(s,2),d=l[0],j=l[1],u=c.a.useState(null),h=Object(m.a)(u,2),O=h[0],x=h[1],f=function(){x(null)},g=t.filter((function(e){return e.name.toLowerCase().includes(d)}));return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{children:[Object(p.jsxs)(v.a,{container:!0,children:[Object(p.jsx)(v.a,{item:!0,xs:8,children:Object(p.jsx)("div",{children:Object(p.jsx)(L,{onChange:function(e){var t=e.target.value;j(t.toLowerCase())},placeholder:"Search..."})})}),Object(p.jsx)(v.a,{item:!0,xs:4,children:Object(p.jsxs)(b.a,{display:"flex",justifyContent:"space-around",children:[Object(p.jsx)(k.a,{"aria-label":"settings","aria-controls":"settings-menu","aria-haspopup":"true",className:i.iconButton,onClick:function(e){x(e.currentTarget)},children:Object(p.jsx)(I.a,{})}),Object(p.jsx)(y.a,{id:"settings-menu",anchorEl:O,keepMounted:!0,open:Boolean(O),onClose:f,children:Object(p.jsx)(S.a,{onClick:function(){r(),f()},children:"Delete everything"})}),Object(p.jsx)(k.a,{"aria-label":"Add",className:"".concat(i.iconButton," ").concat(i.borderButton),onClick:function(){return n("add")},children:Object(p.jsx)(T.a,{})})]})})]}),Object(p.jsx)(b.a,{className:i.cellBox,width:1,children:g.length?g.map((function(e){return Object(p.jsx)(b.a,{className:"".concat(i.cell," ").concat(i.borderCell),children:Object(p.jsx)(K,{secret:e.secret,id:e.id,name:e.name,snackbarOpen:o})},e.id)})):Object(p.jsx)(b.a,{className:i.noItems,py:1,children:t.length?"No totp entries found with given filter.":"No shared secrets found."})})]})})}var z=n(74),X=n.n(z),Z=n(156),$=Object(s.a)((function(e){var t;return{textField:(t={width:"100%"},Object(E.a)(t,e.breakpoints.up("sm"),{width:"70%"}),Object(E.a)(t,"& input",{height:"0.5rem"}),t)}}));function q(e){var t=e.placeholder,n=e.label,a=e.onChange,c=e.error,r=void 0!==c&&c,o=e.helperText,i=void 0===o?"":o,s=$();return Object(p.jsxs)(b.a,{className:s.root,children:[Object(p.jsx)(h.a,{variant:"subtitle1",children:n}),Object(p.jsx)(Z.a,{error:r,helperText:i,className:s.textField,variant:"outlined",onChange:a,placeholder:t})]})}var ee=Object(s.a)((function(e){return{addTotpBox:{borderRadius:"4px",height:"50vh"},goBackText:{color:e.palette.primary.main,textTransform:"none",paddingLeft:e.spacing(1)},goBackIcon:{color:e.palette.primary.main},addBtnBox:{paddingTop:e.spacing(2)},addBtn:{backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark},textTransform:"none"},addBtnText:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)}}}));function te(e){var t=e.handleViewChange,n=e.handleAddCode,c=e.snackBarOpen,r=ee(),o=Object(a.useState)(""),i=Object(m.a)(o,2),s=i[0],l=i[1],d=Object(a.useState)(""),j=Object(m.a)(d,2),u=j[0],O=j[1],x=Object(a.useState)(""),f=Object(m.a)(x,2),g=f[0],v=f[1],C=Object(a.useState)(""),w=Object(m.a)(C,2),y=w[0],S=w[1];return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(b.a,{width:1,className:r.addTotpBox,children:[Object(p.jsx)(b.a,{width:1,children:Object(p.jsxs)(k.a,{onClick:function(){return t("show")},children:[Object(p.jsx)(X.a,{className:r.goBackIcon}),Object(p.jsx)(h.a,{variant:"h5",className:r.goBackText,children:"Go Back"})]})}),Object(p.jsx)(b.a,{p:2,children:Object(p.jsx)(h.a,{children:"You can add authenticator accounts by entering the code provided by the service in which you want to enable 2FA below."})}),Object(p.jsx)(b.a,{p:2,children:Object(p.jsxs)("form",{autoComplete:"off",children:[Object(p.jsx)(b.a,{mb:2,children:Object(p.jsx)(q,{error:!!g.length,helperText:g,placeholder:"Eg. GEZDGNBVGY3TQOJQ",label:"Shared secret: ",onChange:function(e){var t=e.target.value;l(t),t.length?v(""):v("Shared secret cannot be empty")}})}),Object(p.jsx)(b.a,{mb:2,children:Object(p.jsx)(q,{error:!!y.length,helperText:y,placeholder:"Eg. My vault key",label:"Name: ",onChange:function(e){var t=e.target.value;O(t),t.length?S(""):S("Name cannot be empty")}})}),Object(p.jsx)(b.a,{className:r.addBtnBox,children:Object(p.jsxs)(k.a,{className:r.addBtn,onClick:function(e){if(e.preventDefault(),!s.length||!u.length)return s.length||v("Shared secret cannot be empty"),void(u.length||S("Name cannot be empty"));n(s,u),t("show"),c("Totp entry added successfully!")},children:[Object(p.jsx)(T.a,{}),Object(p.jsx)(h.a,{className:r.addBtnText,children:"Add"})]})})]})})]})})}var ne=n(75),ae=n(157),ce=n(159);function re(e){return Object(p.jsx)(ae.a,Object(ne.a)({elevation:6,variant:"filled"},e))}var oe=Object(a.forwardRef)((function(e,t){var n=Object(a.useState)(!1),c=Object(m.a)(n,2),r=c[0],o=c[1],i=e.variant,s=e.text;Object(a.useImperativeHandle)(t,(function(){return{handleOpen:function(){o(!0)}}}));var l=function(e,t){"clickaway"!==t&&o(!1)};return Object(p.jsx)(ce.a,{open:r,autoHideDuration:2e3,onClose:l,children:Object(p.jsx)(re,{onClose:l,severity:i,children:s})})})),ie=Object(s.a)((function(e){return{root:{marginTop:e.spacing(4)},cellContainer:{backgroundColor:e.palette.background.light,borderRadius:"5px",padding:e.spacing(2)},contentBox:{height:"32rem"}}})),se=["show","add"];function le(){var e=ie(),t=Object(a.useState)("show"),n=Object(m.a)(t,2),c=n[0],r=n[1],o=Object(a.useState)(""),i=Object(m.a)(o,2),s=i[0],l=i[1],d=Object(a.useRef)(),j=Object(w.a)("totpData",[]),u=Object(m.a)(j,2),h=u[0],O=u[1],x=function(e,t){O([].concat(Object(g.a)(h),[{id:e,secret:e,name:t}]))},f=function(){O.reset()},k=function(e){se.includes(e)&&r(e)},y=function(e){l(e),d.current.handleOpen()};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(oe,{text:s,variant:"success",ref:d}),Object(p.jsx)(C.a,{className:e.root,children:Object(p.jsx)(v.a,{container:!0,alignItems:"center",justifyContent:"center",children:Object(p.jsx)(v.a,{container:!0,item:!0,xs:12,md:6,className:e.cellContainer,children:Object(p.jsx)(b.a,{className:e.contentBox,width:1,children:function(){switch(c){case"show":return Object(p.jsx)(Q,{handleViewChange:k,data:h,snackBarOpen:y,clearAllCodes:f});case"add":return Object(p.jsx)(te,{handleViewChange:k,handleAddCode:x,snackBarOpen:y});default:return null}}()})})})})]})}var de=Object(s.a)((function(e){return{app:{backgroundColor:e.palette.background.main}}}));function je(e){var t=e.path,n=e.component,a=e.exact,c=void 0===a||a;return Object(p.jsx)(l.a,{exact:c,path:t,children:Object(p.jsx)(f,{children:n})})}var ue=function(){var e=de();document.title="Web - TOTP";var t=Object({NODE_ENV:"production",PUBLIC_URL:"/web-totp",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).PUBLIC_PREFIX||"/";return Object(p.jsx)(d.a,{className:e.app,children:Object(p.jsx)(l.c,{children:Object(p.jsx)(je,{path:t,component:Object(p.jsx)(le,{})})})})},be=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function he(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var pe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,163)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))},Oe=n(77),xe=Object(Oe.a)({palette:{primary:{main:"#0288d1",light:"#5eb8ff",dark:"#005b9f"},secondary:{main:"#bcbcbc",light:"#ffffff",dark:"#7e7e7e"},background:{main:"#ededed",light:"#fff",dark:"#dbdbdb",contrastText:"#000"}}});o.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(i.a,{theme:xe,children:Object(p.jsx)(ue,{})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/web-totp",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/web-totp","/service-worker.js");be?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):he(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):he(t,e)}))}}(),pe()},96:function(e,t,n){}},[[108,1,2]]]);
//# sourceMappingURL=main.e83d494c.chunk.js.map